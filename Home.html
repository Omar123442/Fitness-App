<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .card-container {
            display: flex;
            gap: 15px; 
        }
        .card {
            flex: 1; /* Allows the card to take up available space */
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        }
        .card-title {
            display: flex;
            align-items: center;
        }
        .card-title i {
            font-size: 2rem; 
            margin-right: 10px; 
        }
        @media (max-width: 767.98px) {
            .card-container {
                overflow-x: auto; 
                padding-bottom: 15px; 
            }
        }
        .total{
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            border-radius: 20px; 
        }
        li {
            display: flex;
            justify-content: space-between;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 10px;
            margin-right: 80px;
            list-style-type: circle; 
            border-radius: 17px;
            margin-top: 13px;
            cursor: pointer;
            transition: 0.3s ease-in-out; 
        }
        li:hover {
            transform: scale(1.05);
        }
        .bottom-navbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
        .bottom-navbar .navbar-nav {
            display: flex;
            justify-content: space-around;
            width: 100%;
            flex-direction: row;
        }
        .bottom-navbar .nav-link {
            padding: 0.5rem 1rem;
        }
        .bottom-navbar .navbar-brand {
            display: none; 
        }
        .bottom-navbar .navbar-toggler {
            display: none; 
        }
        .bottom-navbar .form-control, .bottom-navbar .btn {
            display: none; 
        }
        .svg-container {
            position: relative;
            text-align: center;
        }
        .svg-container svg {
            width: 100%;
            height: auto;
        }
        .svg-text {
            font-size: 2rem; 
            fill: white; 
            font-weight: bold;
            text-anchor: middle;
        }

        .tt{
            font-size: 20px;
        }

    
.button-37 {
    background-color: #00cba9; 
  border: 1px solid #00cba9;
  border-radius: 4px;
  box-shadow: rgba(0, 0, 0, .1) 0 2px 4px 0;
  box-sizing: border-box;
  color: #fff;
  cursor: pointer;
  font-family: "Akzidenz Grotesk BQ Medium", -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 16px;
  font-weight: 400;
  outline: none;
  outline: 0;
  padding: 10px 25px;
  text-align: center;
  transform: translateY(0);
  transition: transform 150ms, box-shadow 150ms;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
}

.button-37:hover {
  box-shadow: rgba(0, 0, 0, .15) 0 3px 9px 0;
  transform: translateY(-2px);
}

@media (min-width: 768px) {
  .button-37 {
    padding: 10px 30px;
  }
}
.active{
    color: #4169e1; 
}

        
    </style>
</head>
<body>
    
    <div class="svg-container p-3 tt">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
            <path fill="#00cba9" fill-opacity="1" d="M0,256L80,234.7C160,213,320,171,480,149.3C640,128,800,128,960,128C1120,128,1280,128,1360,128L1440,128L1440,0L1360,0C1280,0,1120,0,960,0C800,0,640,0,480,0C320,0,160,0,80,0L0,0Z"></path>
            <text x="50%" y="50%" class="svg-text"></text>
        </svg>
        <p id="usemail" class="text"></p>
        <p>Let's get back to work</p>
    </div>
    
    <section class="pt-4">
        <div class="container">
            <div class="card-container">
                <div class="card">
                    <div class="card-body bg-info-emphasis">
                        <div class="card-title ">
                            <i class="fa-duotone fa-solid fa-shoe-prints"></i>
                            <div class="px-4  py-3 fw-bold" style="font-size: 20px;">
                                <p id="steps">0</p>

                            </div>
                        </div>
                       
                    </div>
                </div>
                <div   class="card">
                    <div class="card-body ">
                        <div class="card-title">
                            <p><i style="color: #ff4500;" class=" fa-solid fa-fire"></i></p>
                     
                        <div class="px-4  py-3 fw-bold" style="font-size: 20px;">
                            <p id="calories"> 0</p>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            <p id="status"></p>

        </div>
    </section>


    <section class="pt-4">
        <div class="container">
            <h3>Willst du deine Kalorien tracken</h3>
            <div class="cards p-3">
                <div class="p-3 total">
                    <div class="d-flex justify-content-center">
                        <p id="total" >0</p>
                    </div>
                    <div class="d-flex justify-content-center">
                        <p>Total</p>
                    </div>
                </div>
            </div>
            <div class="card-conts">
                <div class="cards">
                    
                        <ul id="cal">
                            <li>Essen 400cal</li>
                        </ul>
                    
                    <div class="d-flex justify-content-center p-2 mb-2">
                        <input id="inputfood" type="text" style="display: block;" placeholder="Type in your Food ">

                    </div>
                    

                    <div class="d-flex justify-content-center pt-2 mb-2" >
                        <input id="input" type="text" style="display: block;" placeholder="Type in your calorie input ">

                    </div>
                    <div class="d-flex justify-content-center p-2">
                        <button class="button-37" id="calbtn">Eingeben</button>

                    </div>

                </div>
            </div>
        </div>
    </section>
    
    <nav class="navbar navbar-expand-lg  bottom-navbar">
        <div class="container-fluid">
            <div class="d-flex justify-content-around w-100">
                <a class="nav-link " aria-current="page" href="weights.html"><i class="fa-sharp-duotone fa-solid fa-dumbbell"></i></a>
                <a class="nav-link active" href="Home.html"><i class="fa-solid fa-house"></i></a>
                <a class="nav-link " href="settings.html"><i class="fa-solid fa-gear"></i></a>
            </div>
        </div>
    </nav>

    <script src="auth.js"></script>
    <script src="home.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
    let currentuser = localStorage.getItem("currentuser");
    let usemail = document.getElementById("usemail");

    usemail.textContent=`Hi ${currentuser}!`; 
    let userCaloriesKey = `calories_${currentuser}`;
    let userTotalKey = `totalsum_${currentuser}`;
    let cal = document.getElementById("cal"); 
    let input = document.getElementById("input"); 
let inputfood= document.getElementById("inputfood"); 
let calories = JSON.parse(localStorage.getItem(userCaloriesKey)) || [];
    let totalsum = JSON.parse(localStorage.getItem(userTotalKey)) || 0;

    function saveUsersToLocalStorage() {
        localStorage.setItem(userCaloriesKey, JSON.stringify(calories));
        localStorage.setItem(userTotalKey, JSON.stringify(totalsum));
    }


function displayInput(){
    cal.innerHTML=""; 
    totalsum=0; 
    let total = document.getElementById("total");

    calories.forEach((item , index) => {
        let li = document.createElement("li"); 
        li.textContent=`${item.inputfood}: ${item.input} cal`; 
        totalsum += item.input;
        let removebtn = document.createElement("button"); 
        removebtn.innerHTML = "<i class='far fa-trash-alt'></i>";
        removebtn.onclick = () =>{
            removeItem(index); 
        }
        li.appendChild(removebtn); 
        cal.appendChild(li);
    });
    total.textContent=`${totalsum}`; 

}

function removeItem(index){
    
   let reomoved= calories.splice(index,1);
   
  
  if (reomoved.length > 0) { 
        totalsum -= reomoved[0].input;
    }
    saveUsersToLocalStorage(); 
    displayInput(); 

}

let calbtn = document.getElementById("calbtn");
calbtn.addEventListener("click", () => {
    let inputfoodVal = inputfood.value;  
    let inputVal = parseInt(input.value, 10); 

    console.log("Button geklickt");

   
    if (isNaN(inputVal) ) {
        alert("Please enter a valid number");
        return;
    }
    if(inputfoodVal === ""){
        alert("Enter a food"); 
        return; 
    }
    calories.push({ inputfood: inputfoodVal, input: inputVal });
    saveUsersToLocalStorage(); 
       document.getElementById("input").value=""; 
    document.getElementById("inputfood").value=""; 
    displayInput();
});



displayInput(); 
});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
